<div class="table-responsive mt-2">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Номер замовлення</th>
                <th>Працівник</th>
                <th>Постачальник</th>
                <th>Статус</th>
                <th>Кількість позицій</th>
                <th>Загальна ціна</th>
                <th>Дата замовлення</th>
            </tr>
        </thead>
        <tbody>
            {% for order in procurement_orders %}
                <tr>
                    <td>
                        {% comment %} <a href="{% url 'procurement-order-detail' order.procurement_order_id %}"> {% endcomment %}
                            {{ order.order_number }}
                        {% comment %} </a> {% endcomment %}
                    </td>
                    <td>{{ order.employee.first_name }} {{ order.employee.last_name }}</td>
                    <td>{{ order.supplier.supplier_name }}</td>
                    <td>
                        {% if order.procurement_status.status_name == "In progress" %}
                            <span class="badge bg-info">In progress</span>
                        {% elif order.procurement_status.status_name == "Delivered" %}
                            <span class="badge bg-success">Delivered</span>
                        {% elif order.procurement_status.status_name == "Rejected" %}
                            <span class="badge bg-danger">Rejected</span>
                        {% elif order.procurement_status.status_name == "Approved" %}
                            <span class="badge bg-primary">Approved</span>
                        {% else %}
                            <span class="badge bg-secondary">{{ order.procurement_status.status_name|default:"Unknown" }}</span>
                        {% endif %}
                    </td>
                    <td>{{order.procurementunit_set.count}}</td>
                    <td>{{ order.total_price|default:"0.00" }} ₴</td>
                    <td>{{ order.order_date|date:"Y-m-d" }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No procurement orders found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="d-flex justify-content-between align-items-center mt-3">
    <div>
        {% if procurement_orders.has_previous %}
        <button hx-get="{% url 'procurement-orders' %}?page={{ procurement_orders.previous_page_number }}&items_per_page={{ procurement_orders.paginator.per_page }}"
                hx-target="#order-list"
                hx-include="#order-filter-form"
                hx-vals='js:{"search": document.getElementById("order-search-bar").value}'
                class="btn btn-primary">Previous</button>
        {% endif %}

        <span class="mx-3">Page {{ procurement_orders.number }} of {{ procurement_orders.paginator.num_pages }}</span>

        {% if procurement_orders.has_next %}
        <button hx-get="{% url 'procurement-orders' %}?page={{ procurement_orders.next_page_number }}&items_per_page={{ procurement_orders.paginator.per_page }}"
                hx-target="#order-list"
                hx-include="#order-filter-form"
                hx-vals='js:{"search": document.getElementById("order-search-bar").value}'
                class="btn btn-primary">Next</button>
        {% endif %}
    </div>

    <div>
        <label for="items-per-page" class="me-2">Items per page:</label>
        <select id="items-per-page" name="items_per_page"
                hx-get="{% url 'procurement-orders' %}"
                hx-target="#order-list"
                hx-include='#order-search-bar, #filter-form'
                class="form-select d-inline-block w-auto">
            <option value="10" {% if procurement_orders.paginator.per_page == 10 %}selected{% endif %}>10</option>
            <option value="25" {% if procurement_orders.paginator.per_page == 25 %}selected{% endif %}>25</option>
            <option value="50" {% if procurement_orders.paginator.per_page == 50 %}selected{% endif %}>50</option>
        </select>
    </div>
</div>
